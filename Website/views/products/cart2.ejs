<!DOCTYPE html>

<html lang = "es">
    
    <%- include ('../partials/head') %>
    
    <body>
    
        <%- include ('../partials/header') %>
        <main>

            <h1> Carrito de compras </h1>

                <div id="cart"> 
                <% if (products.length === 0) { %>
                    <h4 id="empty"> Tu carrito de compras está vacío </h4>
                <% } else { %>

                <% products.forEach(product => { %> 
                    <div id="product-container">
                        <img src="/products/<%= product.images[0].image_path%> " alt="">
                        <div id="product-info">
                            <%= product.product_name %>
                            <p>$<%= product.price %> x <% let cartProduct = cartProducts.find(cartProduct => cartProduct.product_id == product.id) %>
                                <%= cartProduct.quantity %></p>
                        </div>
                    </div>                    
                <% }) %>
            <% } %>
        </div>

        <h3 id="total"> Total de la compra = $<%= cart.cart_total %> </h4>
        
        <div id="botones">
        <form action = '/carrito/eliminar/<%= locals.userLogged.id %>?_method=DELETE' method="POST">
            <button type="submit" class="btn 2"> Vaciar carrito </button>
        </form>
        <form action = '/carrito/continuar/' method="GET">
            <button type="submit" class="btn 2"> Continuar compra </button>
        </form>
        </div>
    
        </main>
        

        <%- include ('../partials/footer') %>

</body>

</html>